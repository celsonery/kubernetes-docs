import{_ as e,c as s,o as a,e as n}from"./app-D3TVpeeg.js";const i={},t=n(`<h1 id="renovar-certificado-kubernetes" tabindex="-1"><a class="header-anchor" href="#renovar-certificado-kubernetes"><span>Renovar certificado Kubernetes</span></a></h1><h4 id="erro-de-certificado" tabindex="-1"><a class="header-anchor" href="#erro-de-certificado"><span>Erro de certificado</span></a></h4><blockquote><p>Em instalações OnPremise do kubernetes é criado certificado váido por 1 ano. Então se ao usar kubectl, está recebendo esta mensagem de erro.</p></blockquote><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">Unable to connect to the server: x509: certificate has expired or is not yet valid.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="verifique-seus-certificados" tabindex="-1"><a class="header-anchor" href="#verifique-seus-certificados"><span>Verifique seus certificados</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">kubeadm certs check-expiration</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="renove-os-certificados" tabindex="-1"><a class="header-anchor" href="#renove-os-certificados"><span>Renove os certificados</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">kubeadm certs renew all</span>
<span class="line"></span>
<span class="line"></span>
<span class="line">Done renewing certificates. You must restart the kube-apiserver, kube-controller-manager, kube-scheduler and etcd, so that they can use the new certificates.</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Então copie /etc/kubernetes/admin.conf para seu ~/.kube/config</p></blockquote><h4 id="reinicie-os-servicos-do-kubernetes" tabindex="-1"><a class="header-anchor" href="#reinicie-os-servicos-do-kubernetes"><span>Reinicie os serviços do kubernetes:</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">kubectl -n kube-system delete pod -l &#39;component=kube-apiserver&#39;</span>
<span class="line">kubectl -n kube-system delete pod -l &#39;component=kube-controller-manager&#39;</span>
<span class="line">kubectl -n kube-system delete pod -l &#39;component=kube-scheduler&#39;</span>
<span class="line">kubectl -n kube-system delete pod -l &#39;component=etcd&#39;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11),r=[t];function c(d,l){return a(),s("div",null,r)}const u=e(i,[["render",c],["__file","25-renovar-certs.html.vue"]]),p=JSON.parse('{"path":"/kubernetes/25-renovar-certs.html","title":"Renovar certificado Kubernetes","lang":"en-US","frontmatter":{},"headers":[],"git":{"updatedTime":1732281297000,"contributors":[{"name":"Celso Nery","email":"celso.nery@gmail.com","commits":1}]},"filePathRelative":"kubernetes/25-renovar-certs.md"}');export{u as comp,p as data};
